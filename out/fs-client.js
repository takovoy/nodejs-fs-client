'use strict';Object.defineProperty(exports,'__esModule',{value:true});var fs=require('fs');var FSClient=function(){function FSClient(basePath){this.basePath=basePath;}FSClient.prototype._openFile=function(filePath,flags){var _this=this;return new Promise(function(resolve,reject){return fs.open(_this.basePath+filePath.replace(/^\/+/,''),flags,function(openError,fileDescriptor){if(openError||!fileDescriptor){reject(openError);return;}resolve(fileDescriptor);});});};FSClient.prototype._writeFile=function(fileDescriptor,data){return new Promise(function(resolve,reject){return fs.writeFile(fileDescriptor,data,function(writeError){if(writeError){reject(writeError);return;}resolve(fileDescriptor);});});};FSClient.prototype._closeFile=function(fileDescriptor){return new Promise(function(resolve,reject){return fs.close(fileDescriptor,function(closeError){if(closeError){reject(closeError);return;}resolve(fileDescriptor);});});};FSClient.prototype.createFile=function(filePath,data){var _this=this;return this._openFile(filePath,'wx').then(function(fileDescriptor){return _this._writeFile(fileDescriptor,data);}).then(function(fileDescriptor){return _this._closeFile(fileDescriptor);});};FSClient.prototype.updateFile=function(filePath,data){var _this=this;return this._openFile(filePath,'r+').then(function(fileDescriptor){return _this._writeFile(fileDescriptor,data);}).then(function(fileDescriptor){return _this._closeFile(fileDescriptor);});};FSClient.prototype.readFile=function(filePath){var _this=this;return new Promise(function(resolve,reject){return fs.readFile(_this.basePath+filePath.replace(/^\/+/,''),'utf8',function(readError,data){if(readError){reject(readError);return;}resolve(data);});});};return FSClient;}();exports.FSClient=FSClient;